/***
 * Transliterator that replaces circled or squared characters with their corresponding templates.
 *
 * @module
 */
import type { Char } from "../types.ts";

type Record_ = [string, "c" | "s", boolean];
type Mappings = Record<string, Record_>;
export type Options = {
  /**
   * Templates used to render circled or squared characters.
   */
  templates?: {
    circle?: string;
    square?: string;
  };
  /**
   * Whether to include emojis in the transliteration. If false, only non-emoji characters will be processed.
   */
  includeEmojis?: boolean;
};
const mappings: Mappings = {
  "\u00A9": ["C", "c", false],
  "\u2117": ["P", "c", false],
  "\u2460": ["1", "c", false],
  "\u2461": ["2", "c", false],
  "\u2462": ["3", "c", false],
  "\u2463": ["4", "c", false],
  "\u2464": ["5", "c", false],
  "\u2465": ["6", "c", false],
  "\u2466": ["7", "c", false],
  "\u2467": ["8", "c", false],
  "\u2468": ["9", "c", false],
  "\u2469": ["10", "c", false],
  "\u246A": ["11", "c", false],
  "\u246B": ["12", "c", false],
  "\u246C": ["13", "c", false],
  "\u246D": ["14", "c", false],
  "\u246E": ["15", "c", false],
  "\u246F": ["16", "c", false],
  "\u2470": ["17", "c", false],
  "\u2471": ["18", "c", false],
  "\u2472": ["19", "c", false],
  "\u2473": ["20", "c", false],
  "\u24B6": ["A", "c", false],
  "\u24B7": ["B", "c", false],
  "\u24B8": ["C", "c", false],
  "\u24B9": ["D", "c", false],
  "\u24BA": ["E", "c", false],
  "\u24BB": ["F", "c", false],
  "\u24BC": ["G", "c", false],
  "\u24BD": ["H", "c", false],
  "\u24BE": ["I", "c", false],
  "\u24BF": ["J", "c", false],
  "\u24C0": ["K", "c", false],
  "\u24C1": ["L", "c", false],
  "\u24C2": ["M", "c", false],
  "\u24C3": ["N", "c", false],
  "\u24C4": ["O", "c", false],
  "\u24C5": ["P", "c", false],
  "\u24C6": ["Q", "c", false],
  "\u24C7": ["R", "c", false],
  "\u24C8": ["S", "c", false],
  "\u24C9": ["T", "c", false],
  "\u24CA": ["U", "c", false],
  "\u24CB": ["V", "c", false],
  "\u24CC": ["W", "c", false],
  "\u24CD": ["X", "c", false],
  "\u24CE": ["Y", "c", false],
  "\u24CF": ["Z", "c", false],
  "\u24D0": ["a", "c", false],
  "\u24D1": ["b", "c", false],
  "\u24D2": ["c", "c", false],
  "\u24D3": ["d", "c", false],
  "\u24D4": ["e", "c", false],
  "\u24D5": ["f", "c", false],
  "\u24D6": ["g", "c", false],
  "\u24D7": ["h", "c", false],
  "\u24D8": ["i", "c", false],
  "\u24D9": ["j", "c", false],
  "\u24DA": ["k", "c", false],
  "\u24DB": ["l", "c", false],
  "\u24DC": ["m", "c", false],
  "\u24DD": ["n", "c", false],
  "\u24DE": ["o", "c", false],
  "\u24DF": ["p", "c", false],
  "\u24E0": ["q", "c", false],
  "\u24E1": ["r", "c", false],
  "\u24E2": ["s", "c", false],
  "\u24E3": ["t", "c", false],
  "\u24E4": ["u", "c", false],
  "\u24E5": ["v", "c", false],
  "\u24E6": ["w", "c", false],
  "\u24E7": ["x", "c", false],
  "\u24E8": ["y", "c", false],
  "\u24E9": ["z", "c", false],
  "\u24EA": ["0", "c", false],
  "\u24EB": ["11", "c", false],
  "\u24EC": ["12", "c", false],
  "\u24ED": ["13", "c", false],
  "\u24EE": ["14", "c", false],
  "\u24EF": ["15", "c", false],
  "\u24F0": ["16", "c", false],
  "\u24F1": ["17", "c", false],
  "\u24F2": ["18", "c", false],
  "\u24F3": ["19", "c", false],
  "\u24F4": ["20", "c", false],
  "\u24F5": ["1", "c", false],
  "\u24F6": ["2", "c", false],
  "\u24F7": ["3", "c", false],
  "\u24F8": ["4", "c", false],
  "\u24F9": ["5", "c", false],
  "\u24FA": ["6", "c", false],
  "\u24FB": ["7", "c", false],
  "\u24FC": ["8", "c", false],
  "\u24FD": ["9", "c", false],
  "\u24FE": ["10", "c", false],
  "\u24FF": ["0", "c", false],
  "\u2776": ["1", "c", false],
  "\u2777": ["2", "c", false],
  "\u2778": ["3", "c", false],
  "\u2779": ["4", "c", false],
  "\u277A": ["5", "c", false],
  "\u277B": ["6", "c", false],
  "\u277C": ["7", "c", false],
  "\u277D": ["8", "c", false],
  "\u277E": ["9", "c", false],
  "\u277F": ["10", "c", false],
  "\u2780": ["1", "c", false],
  "\u2781": ["2", "c", false],
  "\u2782": ["3", "c", false],
  "\u2783": ["4", "c", false],
  "\u2784": ["5", "c", false],
  "\u2785": ["6", "c", false],
  "\u2786": ["7", "c", false],
  "\u2787": ["8", "c", false],
  "\u2788": ["9", "c", false],
  "\u2789": ["10", "c", false],
  "\u278A": ["1", "c", false],
  "\u278B": ["2", "c", false],
  "\u278C": ["3", "c", false],
  "\u278D": ["4", "c", false],
  "\u278E": ["5", "c", false],
  "\u278F": ["6", "c", false],
  "\u2790": ["7", "c", false],
  "\u2791": ["8", "c", false],
  "\u2792": ["9", "c", false],
  "\u2793": ["10", "c", false],
  "\u3036": ["\u3012", "c", false],
  "\u3244": ["\u554F", "c", false],
  "\u3245": ["\u5E7C", "c", false],
  "\u3246": ["\u6587", "c", false],
  "\u3247": ["\u7B8F", "c", false],
  "\u3248": ["21", "c", false],
  "\u3252": ["22", "c", false],
  "\u3253": ["23", "c", false],
  "\u3254": ["24", "c", false],
  "\u3255": ["25", "c", false],
  "\u3256": ["26", "c", false],
  "\u3257": ["27", "c", false],
  "\u3258": ["28", "c", false],
  "\u3259": ["29", "c", false],
  "\u325A": ["30", "c", false],
  "\u325B": ["31", "c", false],
  "\u325C": ["32", "c", false],
  "\u325D": ["33", "c", false],
  "\u325E": ["34", "c", false],
  "\u325F": ["35", "c", false],
  "\u3280": ["\u4E00", "c", false],
  "\u3281": ["\u4E8C", "c", false],
  "\u3282": ["\u4E09", "c", false],
  "\u3283": ["\u56DB", "c", false],
  "\u3284": ["\u4E94", "c", false],
  "\u3285": ["\u516D", "c", false],
  "\u3286": ["\u4E03", "c", false],
  "\u3287": ["\u516B", "c", false],
  "\u3288": ["\u4E5D", "c", false],
  "\u3289": ["\u5341", "c", false],
  "\u328A": ["\u6708", "c", false],
  "\u328B": ["\u706B", "c", false],
  "\u328C": ["\u6C34", "c", false],
  "\u328D": ["\u6728", "c", false],
  "\u328E": ["\u91D1", "c", false],
  "\u328F": ["\u571F", "c", false],
  "\u3290": ["\u65E5", "c", false],
  "\u3291": ["\u682A", "c", false],
  "\u3292": ["\u6709", "c", false],
  "\u3293": ["\u793E", "c", false],
  "\u3294": ["\u540D", "c", false],
  "\u3295": ["\u7279", "c", false],
  "\u3296": ["\u8CA1", "c", false],
  "\u3297": ["\u795D", "c", false],
  "\u3298": ["\u52B4", "c", false],
  "\u3299": ["\u79D8", "c", false],
  "\u329A": ["\u7537", "c", false],
  "\u329B": ["\u5973", "c", false],
  "\u329C": ["\u9069", "c", false],
  "\u329D": ["\u512A", "c", false],
  "\u329E": ["\u5370", "c", false],
  "\u329F": ["\u6CE8", "c", false],
  "\u32A0": ["\u9805", "c", false],
  "\u32A1": ["\u4F11", "c", false],
  "\u32A2": ["\u5199", "c", false],
  "\u32A3": ["\u6B63", "c", false],
  "\u32A4": ["\u4E0A", "c", false],
  "\u32A5": ["\u4E2D", "c", false],
  "\u32A6": ["\u4E0B", "c", false],
  "\u32A7": ["\u5DE6", "c", false],
  "\u32A8": ["\u53F3", "c", false],
  "\u32A9": ["\u533B", "c", false],
  "\u32AA": ["\u5B97", "c", false],
  "\u32AB": ["\u5B66", "c", false],
  "\u32AC": ["\u76E3", "c", false],
  "\u32AD": ["\u4F01", "c", false],
  "\u32AE": ["\u8CC7", "c", false],
  "\u32AF": ["\u5354", "c", false],
  "\u32B0": ["\u591C", "c", false],
  "\u32B1": ["36", "c", false],
  "\u32B2": ["37", "c", false],
  "\u32B3": ["38", "c", false],
  "\u32B4": ["39", "c", false],
  "\u32B5": ["40", "c", false],
  "\u32B6": ["41", "c", false],
  "\u32B7": ["42", "c", false],
  "\u32B8": ["43", "c", false],
  "\u32B9": ["44", "c", false],
  "\u32BA": ["45", "c", false],
  "\u32BB": ["46", "c", false],
  "\u32BC": ["47", "c", false],
  "\u32BD": ["48", "c", false],
  "\u32BE": ["49", "c", false],
  "\u32BF": ["50", "c", false],
  "\u32D0": ["\u30A2", "c", false],
  "\u32D1": ["\u30A4", "c", false],
  "\u32D2": ["\u30A6", "c", false],
  "\u32D3": ["\u30A8", "c", false],
  "\u32D4": ["\u30AA", "c", false],
  "\u32D5": ["\u30AB", "c", false],
  "\u32D6": ["\u30AD", "c", false],
  "\u32D7": ["\u30AF", "c", false],
  "\u32D8": ["\u30B1", "c", false],
  "\u32D9": ["\u30B3", "c", false],
  "\u32DA": ["\u30B5", "c", false],
  "\u32DB": ["\u30B7", "c", false],
  "\u32DC": ["\u30B9", "c", false],
  "\u32DD": ["\u30BB", "c", false],
  "\u32DE": ["\u30BD", "c", false],
  "\u32DF": ["\u30BF", "c", false],
  "\u32E0": ["\u30C1", "c", false],
  "\u32E1": ["\u30C4", "c", false],
  "\u32E2": ["\u30C6", "c", false],
  "\u32E3": ["\u30C8", "c", false],
  "\u32E4": ["\u30CA", "c", false],
  "\u32E5": ["\u30CB", "c", false],
  "\u32E6": ["\u30CC", "c", false],
  "\u32E7": ["\u30CD", "c", false],
  "\u32E8": ["\u30CE", "c", false],
  "\u32E9": ["\u30CF", "c", false],
  "\u32EA": ["\u30D2", "c", false],
  "\u32EB": ["\u30D5", "c", false],
  "\u32EC": ["\u30D8", "c", false],
  "\u32ED": ["\u30DB", "c", false],
  "\u32EE": ["\u30DE", "c", false],
  "\u32EF": ["\u30DF", "c", false],
  "\u32F0": ["\u30E0", "c", false],
  "\u32F1": ["\u30E1", "c", false],
  "\u32F2": ["\u30E2", "c", false],
  "\u32F3": ["\u30E4", "c", false],
  "\u32F4": ["\u30E6", "c", false],
  "\u32F5": ["\u30E8", "c", false],
  "\u32F6": ["\u30E9", "c", false],
  "\u32F7": ["\u30EA", "c", false],
  "\u32F8": ["\u30EB", "c", false],
  "\u32F9": ["\u30EC", "c", false],
  "\u32FA": ["\u30ED", "c", false],
  "\u32FB": ["\u30EF", "c", false],
  "\u32FC": ["\u30F0", "c", false],
  "\u32FD": ["\u30F1", "c", false],
  "\u32FE": ["\u30F2", "c", false],
  "\uD83C\uDD0B": ["0", "c", false],
  "\uD83C\uDD0C": ["0", "c", false],
  "\uD83C\uDD2B": ["C", "c", false],
  "\uD83C\uDD2C": ["R", "c", false],
  "\uD83C\uDD2D": ["CD", "c", false],
  "\uD83C\uDD2E": ["WZ", "c", false],
  "\uD83C\uDD30": ["A", "s", false],
  "\uD83C\uDD31": ["B", "s", false],
  "\uD83C\uDD32": ["C", "s", false],
  "\uD83C\uDD33": ["D", "s", false],
  "\uD83C\uDD34": ["E", "s", false],
  "\uD83C\uDD35": ["F", "s", false],
  "\uD83C\uDD36": ["G", "s", false],
  "\uD83C\uDD37": ["H", "s", false],
  "\uD83C\uDD38": ["I", "s", false],
  "\uD83C\uDD39": ["J", "s", false],
  "\uD83C\uDD3A": ["K", "s", false],
  "\uD83C\uDD3B": ["L", "s", false],
  "\uD83C\uDD3C": ["M", "s", false],
  "\uD83C\uDD3D": ["N", "s", false],
  "\uD83C\uDD3E": ["O", "s", false],
  "\uD83C\uDD3F": ["P", "s", false],
  "\uD83C\uDD40": ["Q", "s", false],
  "\uD83C\uDD41": ["R", "s", false],
  "\uD83C\uDD42": ["S", "s", false],
  "\uD83C\uDD43": ["T", "s", false],
  "\uD83C\uDD44": ["U", "s", false],
  "\uD83C\uDD45": ["V", "s", false],
  "\uD83C\uDD46": ["W", "s", false],
  "\uD83C\uDD47": ["X", "s", false],
  "\uD83C\uDD48": ["Y", "s", false],
  "\uD83C\uDD49": ["Z", "s", false],
  "\uD83C\uDD4A": ["HV", "s", false],
  "\uD83C\uDD4B": ["MV", "s", false],
  "\uD83C\uDD4C": ["SD", "s", false],
  "\uD83C\uDD4D": ["SS", "s", false],
  "\uD83C\uDD4E": ["PPV", "s", false],
  "\uD83C\uDD4F": ["WC", "s", false],
  "\uD83C\uDD50": ["A", "c", false],
  "\uD83C\uDD51": ["B", "c", false],
  "\uD83C\uDD52": ["C", "c", false],
  "\uD83C\uDD53": ["D", "c", false],
  "\uD83C\uDD54": ["E", "c", false],
  "\uD83C\uDD55": ["F", "c", false],
  "\uD83C\uDD56": ["G", "c", false],
  "\uD83C\uDD57": ["H", "c", false],
  "\uD83C\uDD58": ["I", "c", false],
  "\uD83C\uDD59": ["J", "c", false],
  "\uD83C\uDD5A": ["K", "c", false],
  "\uD83C\uDD5B": ["L", "c", false],
  "\uD83C\uDD5C": ["M", "c", false],
  "\uD83C\uDD5D": ["N", "c", false],
  "\uD83C\uDD5E": ["O", "c", false],
  "\uD83C\uDD5F": ["P", "c", false],
  "\uD83C\uDD60": ["Q", "c", false],
  "\uD83C\uDD61": ["R", "c", false],
  "\uD83C\uDD62": ["S", "c", false],
  "\uD83C\uDD63": ["T", "c", false],
  "\uD83C\uDD64": ["U", "c", false],
  "\uD83C\uDD65": ["V", "c", false],
  "\uD83C\uDD66": ["W", "c", false],
  "\uD83C\uDD67": ["X", "c", false],
  "\uD83C\uDD68": ["Y", "c", false],
  "\uD83C\uDD69": ["Z", "c", false],
  "\uD83C\uDD70": ["A", "s", false],
  "\uD83C\uDD71": ["B", "s", false],
  "\uD83C\uDD72": ["C", "s", false],
  "\uD83C\uDD73": ["D", "s", false],
  "\uD83C\uDD74": ["E", "s", false],
  "\uD83C\uDD75": ["F", "s", false],
  "\uD83C\uDD76": ["G", "s", false],
  "\uD83C\uDD77": ["H", "s", false],
  "\uD83C\uDD78": ["I", "s", false],
  "\uD83C\uDD79": ["J", "s", false],
  "\uD83C\uDD7A": ["K", "s", false],
  "\uD83C\uDD7B": ["L", "s", false],
  "\uD83C\uDD7C": ["M", "s", false],
  "\uD83C\uDD7D": ["N", "s", false],
  "\uD83C\uDD7E": ["O", "s", false],
  "\uD83C\uDD7F": ["P", "s", false],
  "\uD83C\uDD80": ["Q", "s", false],
  "\uD83C\uDD81": ["R", "s", false],
  "\uD83C\uDD82": ["S", "s", false],
  "\uD83C\uDD83": ["T", "s", false],
  "\uD83C\uDD84": ["U", "s", false],
  "\uD83C\uDD85": ["V", "s", false],
  "\uD83C\uDD86": ["W", "s", false],
  "\uD83C\uDD87": ["X", "s", false],
  "\uD83C\uDD88": ["Y", "s", false],
  "\uD83C\uDD89": ["Z", "s", false],
  "\uD83C\uDD8B": ["IC", "s", false],
  "\uD83C\uDD8C": ["PA", "s", false],
  "\uD83C\uDD8D": ["SA", "s", false],
  "\uD83C\uDD8E": ["AB", "s", true],
  "\uD83C\uDD8F": ["WC", "s", false],
  "\uD83C\uDD90": ["DJ", "s", false],
  "\uD83C\uDD91": ["CL", "s", true],
  "\uD83C\uDD92": ["COOL", "s", true],
  "\uD83C\uDD93": ["FREE", "s", true],
  "\uD83C\uDD94": ["ID", "s", true],
  "\uD83C\uDD95": ["NEW", "s", true],
  "\uD83C\uDD96": ["NG", "s", true],
  "\uD83C\uDD97": ["OK", "s", true],
  "\uD83C\uDD98": ["SOS", "s", true],
  "\uD83C\uDD99": ["UP!", "s", true],
  "\uD83C\uDD9A": ["VS", "s", true],
  "\uD83C\uDD9B": ["3D", "s", false],
  "\uD83C\uDD9C": ["2ndScr", "s", false],
  "\uD83C\uDD9D": ["2K", "s", false],
  "\uD83C\uDD9E": ["4K", "s", false],
  "\uD83C\uDD9F": ["8K", "s", false],
  "\uD83C\uDDA0": ["5.1", "s", false],
  "\uD83C\uDDA1": ["7.1", "s", false],
  "\uD83C\uDDA2": ["22.2", "s", false],
  "\uD83C\uDDA3": ["60P", "s", false],
  "\uD83C\uDDA4": ["120P", "s", false],
  "\uD83C\uDDA5": ["d", "s", false],
  "\uD83C\uDDA6": ["HC", "s", false],
  "\uD83C\uDDA7": ["HDR", "s", false],
  "\uD83C\uDDA8": ["Hi-Res", "s", false],
  "\uD83C\uDDA9": ["Lossless", "s", false],
  "\uD83C\uDDAA": ["SHV", "s", false],
  "\uD83C\uDDAB": ["UHD", "s", false],
  "\uD83C\uDDAC": ["VOD", "s", false],
  "\uD83C\uDDAD": ["VOD", "s", false],
  "\uD83C\uDDE6": ["A", "s", false],
  "\uD83C\uDDE7": ["B", "s", false],
  "\uD83C\uDDE8": ["C", "s", false],
  "\uD83C\uDDE9": ["D", "s", false],
  "\uD83C\uDDEA": ["E", "s", false],
  "\uD83C\uDDEB": ["F", "s", false],
  "\uD83C\uDDEC": ["G", "s", false],
  "\uD83C\uDDED": ["H", "s", false],
  "\uD83C\uDDEE": ["I", "s", false],
  "\uD83C\uDDEF": ["J", "s", false],
  "\uD83C\uDDF0": ["K", "s", false],
  "\uD83C\uDDF1": ["L", "s", false],
  "\uD83C\uDDF2": ["M", "s", false],
  "\uD83C\uDDF3": ["N", "s", false],
  "\uD83C\uDDF4": ["O", "s", false],
  "\uD83C\uDDF5": ["P", "s", false],
  "\uD83C\uDDF6": ["Q", "s", false],
  "\uD83C\uDDF7": ["R", "s", false],
  "\uD83C\uDDF8": ["S", "s", false],
  "\uD83C\uDDF9": ["T", "s", false],
  "\uD83C\uDDFA": ["U", "s", false],
  "\uD83C\uDDFB": ["V", "s", false],
  "\uD83C\uDDFC": ["W", "s", false],
  "\uD83C\uDDFD": ["X", "s", false],
  "\uD83C\uDDFE": ["Y", "s", false],
  "\uD83C\uDDFF": ["Z", "s", false],
  "\uD83D\uDEBE": ["WC", "s", true],
  "\uD83C\uDE00": ["\u307B\u304B", "s", false],
  "\uD83C\uDE01": ["\u30B3\u30B3", "s", true],
  "\uD83C\uDE02": ["\u30B5", "s", false],
  "\uD83C\uDE10": ["\u624B", "s", false],
  "\uD83C\uDE11": ["\u5B57", "s", false],
  "\uD83C\uDE12": ["\u53CC", "s", false],
  "\uD83C\uDE13": ["\u30C7", "s", false],
  "\uD83C\uDE14": ["\u4E8C", "s", false],
  "\uD83C\uDE15": ["\u591A", "s", false],
  "\uD83C\uDE16": ["\u89E3", "s", false],
  "\uD83C\uDE17": ["\u5929", "s", false],
  "\uD83C\uDE18": ["\u4EA4", "s", false],
  "\uD83C\uDE19": ["\u6620", "s", false],
  "\uD83C\uDE1A": ["\u7121", "s", true],
  "\uD83C\uDE1B": ["\u6599", "s", false],
  "\uD83C\uDE1C": ["\u524D", "s", false],
  "\uD83C\uDE1D": ["\u5F8C", "s", false],
  "\uD83C\uDE1E": ["\u518D", "s", false],
  "\uD83C\uDE1F": ["\u65B0", "s", false],
  "\uD83C\uDE20": ["\u521D", "s", false],
  "\uD83C\uDE21": ["\u7D42", "s", false],
  "\uD83C\uDE22": ["\u751F", "s", false],
  "\uD83C\uDE23": ["\u8CA9", "s", false],
  "\uD83C\uDE24": ["\u58F0", "s", false],
  "\uD83C\uDE25": ["\u5439", "s", false],
  "\uD83C\uDE26": ["\u6F14", "s", false],
  "\uD83C\uDE27": ["\u6295", "s", false],
  "\uD83C\uDE28": ["\u6355", "s", false],
  "\uD83C\uDE29": ["\u4E00", "s", false],
  "\uD83C\uDE2A": ["\u4E09", "s", false],
  "\uD83C\uDE2B": ["\u904A", "s", false],
  "\uD83C\uDE2C": ["\u5DE6", "s", false],
  "\uD83C\uDE2D": ["\u4E2D", "s", false],
  "\uD83C\uDE2E": ["\u53F3", "s", false],
  "\uD83C\uDE2F": ["\u6307", "s", true],
  "\uD83C\uDE30": ["\u8D70", "s", false],
  "\uD83C\uDE31": ["\u6253", "s", false],
  "\uD83C\uDE32": ["\u7981", "s", true],
  "\uD83C\uDE33": ["\u7A7A", "s", true],
  "\uD83C\uDE34": ["\u5408", "s", true],
  "\uD83C\uDE35": ["\u6E80", "s", true],
  "\uD83C\uDE36": ["\u6709", "s", true],
  "\uD83C\uDE37": ["\u6708", "s", false],
  "\uD83C\uDE38": ["\u7533", "s", true],
  "\uD83C\uDE39": ["\u5272", "s", true],
  "\uD83C\uDE3A": ["\u55B6", "s", true],
  "\uD83C\uDE3B": ["\u914D", "s", false],
  "\uD83C\uDE50": ["\u5F97", "c", true],
  "\uD83C\uDE51": ["\u53EF", "c", true],
};
/**
 * A transliterator that replaces circled or squared characters.
 *
 * @param options Options for the transliterator.
 * @returns An iterable that yields transliterated characters.
 */
export default (options: Options): ((_: Iterable<Char>) => Iterable<Char>) => {
  const includeEmojis = options.includeEmojis ?? false;
  const templates = {
    c: options.templates?.circle ?? "(?)",
    s: options.templates?.square ?? "[?]",
  };
  return function* (in_: Iterable<Char>) {
    let offset = 0;
    for (const c of in_) {
      const r = mappings[c.c];
      if (r != null && (!r[2] || includeEmojis)) {
        for (const rc of templates[r[1]].replace("?", r[0])) {
          yield { c: rc, offset: offset, source: c };
          offset += rc.length;
        }
      } else {
        yield { c: c.c, offset: offset, source: c };
        offset += c.c.length;
      }
    }
  };
};
