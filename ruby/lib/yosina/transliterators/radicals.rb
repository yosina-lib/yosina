# frozen_string_literal: true

module Yosina
  module Transliterators
    # Replace Kangxi radicals with equivalent CJK ideographs
    module Radicals
      # Generated mapping data from radicals.json
      RADICALS_MAPPINGS = {
        "\u{2f00}" => "\u{4e00}",
        "\u{2f01}" => "\u{4e28}",
        "\u{2f02}" => "\u{4e36}",
        "\u{2f03}" => "\u{4e3f}",
        "\u{2f04}" => "\u{4e59}",
        "\u{2f05}" => "\u{4e85}",
        "\u{2f06}" => "\u{4e8c}",
        "\u{2f07}" => "\u{4ea0}",
        "\u{2f08}" => "\u{4eba}",
        "\u{2f09}" => "\u{513f}",
        "\u{2f0a}" => "\u{5165}",
        "\u{2f0b}" => "\u{516b}",
        "\u{2f0c}" => "\u{5182}",
        "\u{2f0d}" => "\u{5196}",
        "\u{2f0e}" => "\u{51ab}",
        "\u{2f0f}" => "\u{51e0}",
        "\u{2f10}" => "\u{51f5}",
        "\u{2f11}" => "\u{5200}",
        "\u{2f12}" => "\u{529b}",
        "\u{2f13}" => "\u{52f9}",
        "\u{2f14}" => "\u{5315}",
        "\u{2f15}" => "\u{531a}",
        "\u{2f16}" => "\u{5338}",
        "\u{2f17}" => "\u{5341}",
        "\u{2f18}" => "\u{535c}",
        "\u{2f19}" => "\u{5369}",
        "\u{2f1a}" => "\u{5382}",
        "\u{2f1b}" => "\u{53b6}",
        "\u{2f1c}" => "\u{53c8}",
        "\u{2f1d}" => "\u{53e3}",
        "\u{2f1e}" => "\u{56d7}",
        "\u{2f1f}" => "\u{571f}",
        "\u{2f20}" => "\u{58eb}",
        "\u{2f21}" => "\u{5902}",
        "\u{2f22}" => "\u{590a}",
        "\u{2f23}" => "\u{5915}",
        "\u{2f24}" => "\u{5927}",
        "\u{2f25}" => "\u{5973}",
        "\u{2f26}" => "\u{5b50}",
        "\u{2f27}" => "\u{5b80}",
        "\u{2f28}" => "\u{5bf8}",
        "\u{2f29}" => "\u{5c0f}",
        "\u{2f2a}" => "\u{5c22}",
        "\u{2f2b}" => "\u{5c38}",
        "\u{2f2c}" => "\u{5c6e}",
        "\u{2f2d}" => "\u{5c71}",
        "\u{2f2e}" => "\u{5ddb}",
        "\u{2f2f}" => "\u{5de5}",
        "\u{2f30}" => "\u{5df1}",
        "\u{2f31}" => "\u{5dfe}",
        "\u{2f32}" => "\u{5e72}",
        "\u{2f33}" => "\u{5e7a}",
        "\u{2f34}" => "\u{5e7f}",
        "\u{2f35}" => "\u{5ef4}",
        "\u{2f36}" => "\u{5efe}",
        "\u{2f37}" => "\u{5f0b}",
        "\u{2f38}" => "\u{5f13}",
        "\u{2f39}" => "\u{5f50}",
        "\u{2f3a}" => "\u{5f61}",
        "\u{2f3b}" => "\u{5f73}",
        "\u{2f3c}" => "\u{5fc3}",
        "\u{2f3d}" => "\u{6208}",
        "\u{2f3e}" => "\u{6236}",
        "\u{2f3f}" => "\u{624b}",
        "\u{2f40}" => "\u{652f}",
        "\u{2f41}" => "\u{6534}",
        "\u{2f42}" => "\u{6587}",
        "\u{2f43}" => "\u{6597}",
        "\u{2f44}" => "\u{65a4}",
        "\u{2f45}" => "\u{65b9}",
        "\u{2f46}" => "\u{65e0}",
        "\u{2f47}" => "\u{65e5}",
        "\u{2f48}" => "\u{66f0}",
        "\u{2f49}" => "\u{6708}",
        "\u{2f4a}" => "\u{6728}",
        "\u{2f4b}" => "\u{6b20}",
        "\u{2f4c}" => "\u{6b62}",
        "\u{2f4d}" => "\u{6b79}",
        "\u{2f4e}" => "\u{6bb3}",
        "\u{2f4f}" => "\u{6bcb}",
        "\u{2f50}" => "\u{6bd4}",
        "\u{2f51}" => "\u{6bdb}",
        "\u{2f52}" => "\u{6c0f}",
        "\u{2f53}" => "\u{6c14}",
        "\u{2f54}" => "\u{6c34}",
        "\u{2f55}" => "\u{706b}",
        "\u{2f56}" => "\u{722a}",
        "\u{2f57}" => "\u{7236}",
        "\u{2f58}" => "\u{723b}",
        "\u{2f59}" => "\u{723f}",
        "\u{2f5a}" => "\u{7247}",
        "\u{2f5b}" => "\u{7259}",
        "\u{2f5c}" => "\u{725b}",
        "\u{2f5d}" => "\u{72ac}",
        "\u{2f5e}" => "\u{7384}",
        "\u{2f5f}" => "\u{7389}",
        "\u{2f60}" => "\u{74dc}",
        "\u{2f61}" => "\u{74e6}",
        "\u{2f62}" => "\u{7518}",
        "\u{2f63}" => "\u{751f}",
        "\u{2f64}" => "\u{7528}",
        "\u{2f65}" => "\u{7530}",
        "\u{2f66}" => "\u{758b}",
        "\u{2f67}" => "\u{7592}",
        "\u{2f68}" => "\u{7676}",
        "\u{2f69}" => "\u{767d}",
        "\u{2f6a}" => "\u{76ae}",
        "\u{2f6b}" => "\u{76bf}",
        "\u{2f6c}" => "\u{76ee}",
        "\u{2f6d}" => "\u{77db}",
        "\u{2f6e}" => "\u{77e2}",
        "\u{2f6f}" => "\u{77f3}",
        "\u{2f70}" => "\u{793a}",
        "\u{2f71}" => "\u{79b8}",
        "\u{2f72}" => "\u{79be}",
        "\u{2f73}" => "\u{7a74}",
        "\u{2f74}" => "\u{7acb}",
        "\u{2f75}" => "\u{7af9}",
        "\u{2f76}" => "\u{7c73}",
        "\u{2f77}" => "\u{7cf8}",
        "\u{2f78}" => "\u{7f36}",
        "\u{2f79}" => "\u{7f51}",
        "\u{2f7a}" => "\u{7f8a}",
        "\u{2f7b}" => "\u{7fbd}",
        "\u{2f7c}" => "\u{8001}",
        "\u{2f7d}" => "\u{800c}",
        "\u{2f7e}" => "\u{8012}",
        "\u{2f7f}" => "\u{8033}",
        "\u{2f80}" => "\u{807f}",
        "\u{2f81}" => "\u{8089}",
        "\u{2f82}" => "\u{81e3}",
        "\u{2f83}" => "\u{81ea}",
        "\u{2f84}" => "\u{81f3}",
        "\u{2f85}" => "\u{81fc}",
        "\u{2f86}" => "\u{820c}",
        "\u{2f87}" => "\u{821b}",
        "\u{2f88}" => "\u{821f}",
        "\u{2f89}" => "\u{826e}",
        "\u{2f8a}" => "\u{8272}",
        "\u{2f8b}" => "\u{8278}",
        "\u{2f8c}" => "\u{864d}",
        "\u{2f8d}" => "\u{866b}",
        "\u{2f8e}" => "\u{8840}",
        "\u{2f8f}" => "\u{884c}",
        "\u{2f90}" => "\u{8863}",
        "\u{2f91}" => "\u{897e}",
        "\u{2f92}" => "\u{898b}",
        "\u{2f93}" => "\u{89d2}",
        "\u{2f94}" => "\u{8a00}",
        "\u{2f95}" => "\u{8c37}",
        "\u{2f96}" => "\u{8c46}",
        "\u{2f97}" => "\u{8c55}",
        "\u{2f98}" => "\u{8c78}",
        "\u{2f99}" => "\u{8c9d}",
        "\u{2f9a}" => "\u{8d64}",
        "\u{2f9b}" => "\u{8d70}",
        "\u{2f9c}" => "\u{8db3}",
        "\u{2f9d}" => "\u{8eab}",
        "\u{2f9e}" => "\u{8eca}",
        "\u{2f9f}" => "\u{8f9b}",
        "\u{2fa0}" => "\u{8fb0}",
        "\u{2fa1}" => "\u{8fb5}",
        "\u{2fa2}" => "\u{9091}",
        "\u{2fa3}" => "\u{9149}",
        "\u{2fa4}" => "\u{91c6}",
        "\u{2fa5}" => "\u{91cc}",
        "\u{2fa6}" => "\u{91d1}",
        "\u{2fa7}" => "\u{9577}",
        "\u{2fa8}" => "\u{9580}",
        "\u{2fa9}" => "\u{961c}",
        "\u{2faa}" => "\u{96b6}",
        "\u{2fab}" => "\u{96b9}",
        "\u{2fac}" => "\u{96e8}",
        "\u{2fad}" => "\u{9751}",
        "\u{2fae}" => "\u{975e}",
        "\u{2faf}" => "\u{9762}",
        "\u{2fb0}" => "\u{9769}",
        "\u{2fb1}" => "\u{97cb}",
        "\u{2fb2}" => "\u{97ed}",
        "\u{2fb3}" => "\u{97f3}",
        "\u{2fb4}" => "\u{9801}",
        "\u{2fb5}" => "\u{98a8}",
        "\u{2fb6}" => "\u{98db}",
        "\u{2fb7}" => "\u{98df}",
        "\u{2fb8}" => "\u{9996}",
        "\u{2fb9}" => "\u{9999}",
        "\u{2fba}" => "\u{99ac}",
        "\u{2fbb}" => "\u{9aa8}",
        "\u{2fbc}" => "\u{9ad8}",
        "\u{2fbd}" => "\u{9adf}",
        "\u{2fbe}" => "\u{9b25}",
        "\u{2fbf}" => "\u{9b2f}",
        "\u{2fc0}" => "\u{9b32}",
        "\u{2fc1}" => "\u{9b3c}",
        "\u{2fc2}" => "\u{9b5a}",
        "\u{2fc3}" => "\u{9ce5}",
        "\u{2fc4}" => "\u{9e75}",
        "\u{2fc5}" => "\u{9e7f}",
        "\u{2fc6}" => "\u{9ea5}",
        "\u{2fc7}" => "\u{9ebb}",
        "\u{2fc8}" => "\u{9ec3}",
        "\u{2fc9}" => "\u{9ecd}",
        "\u{2fca}" => "\u{9ed1}",
        "\u{2fcb}" => "\u{9ef9}",
        "\u{2fcc}" => "\u{9efd}",
        "\u{2fcd}" => "\u{9f0e}",
        "\u{2fce}" => "\u{9f13}",
        "\u{2fcf}" => "\u{9f20}",
        "\u{2fd0}" => "\u{9f3b}",
        "\u{2fd1}" => "\u{9f4a}",
        "\u{2fd2}" => "\u{9f52}",
        "\u{2fd3}" => "\u{9f8d}",
        "\u{2fd4}" => "\u{9f9c}",
        "\u{2fd5}" => "\u{9fa0}",
        "\u{2e80}" => "\u{51ab}",
        "\u{2e81}" => "\u{5382}",
        "\u{2e82}" => "\u{4e5b}",
        "\u{2e83}" => "\u{4e5a}",
        "\u{2e84}" => "\u{4e59}",
        "\u{2e85}" => "\u{4ebb}",
        "\u{2e86}" => "\u{5182}",
        "\u{2e89}" => "\u{5202}",
        "\u{2e8a}" => "\u{535c}",
        "\u{2e8b}" => "\u{353e}",
        "\u{2e8e}" => "\u{5140}",
        "\u{2e8f}" => "\u{5c23}",
        "\u{2e90}" => "\u{5c22}",
        "\u{2e92}" => "\u{5df3}",
        "\u{2e93}" => "\u{5e7a}",
        "\u{2e94}" => "\u{5f51}",
        "\u{2e95}" => "\u{5f50}",
        "\u{2e96}" => "\u{5fc4}",
        "\u{2e97}" => "\u{38fa}",
        "\u{2e98}" => "\u{624c}",
        "\u{2e99}" => "\u{6535}",
        "\u{2e9b}" => "\u{65e1}",
        "\u{2e9d}" => "\u{6708}",
        "\u{2e9e}" => "\u{6b7a}",
        "\u{2e9f}" => "\u{6bcd}",
        "\u{2ea0}" => "\u{6c11}",
        "\u{2ea1}" => "\u{6c35}",
        "\u{2ea2}" => "\u{6c3a}",
        "\u{2ea3}" => "\u{706c}",
        "\u{2ea5}" => "\u{722b}",
        "\u{2ea6}" => "\u{4e2c}",
        "\u{2ea8}" => "\u{72ad}",
        "\u{2eab}" => "\u{7f52}",
        "\u{2eac}" => "\u{793a}",
        "\u{2ead}" => "\u{793b}",
        "\u{2eaf}" => "\u{7cf9}",
        "\u{2eb0}" => "\u{7e9f}",
        "\u{2eb1}" => "\u{7f53}",
        "\u{2eb3}" => "\u{34c1}",
        "\u{2eb4}" => "\u{34c1}",
        "\u{2eb9}" => "\u{8002}",
        "\u{2eba}" => "\u{8080}",
        "\u{2ebc}" => "\u{6708}",
        "\u{2ebd}" => "\u{81fc}",
        "\u{2ebe}" => "\u{8279}",
        "\u{2ebf}" => "\u{8279}",
        "\u{2ec0}" => "\u{8279}",
        "\u{2ec1}" => "\u{864e}",
        "\u{2ec2}" => "\u{8864}",
        "\u{2ec3}" => "\u{8980}",
        "\u{2ec4}" => "\u{897f}",
        "\u{2ec5}" => "\u{89c1}",
        "\u{2ec8}" => "\u{8ba0}",
        "\u{2ec9}" => "\u{8d1d}",
        "\u{2ecb}" => "\u{8f66}",
        "\u{2ecd}" => "\u{8fb6}",
        "\u{2ecf}" => "\u{961d}",
        "\u{2ed0}" => "\u{9485}",
        "\u{2ed1}" => "\u{9577}",
        "\u{2ed2}" => "\u{9578}",
        "\u{2ed3}" => "\u{957f}",
        "\u{2ed6}" => "\u{961d}",
        "\u{2ed8}" => "\u{9752}",
        "\u{2ed9}" => "\u{97e6}",
        "\u{2eda}" => "\u{9875}",
        "\u{2edb}" => "\u{98ce}",
        "\u{2edc}" => "\u{98de}",
        "\u{2edd}" => "\u{98df}",
        "\u{2edf}" => "\u{98e0}",
        "\u{2ee0}" => "\u{9963}",
        "\u{2ee2}" => "\u{9a6c}",
        "\u{2ee3}" => "\u{9aa8}",
        "\u{2ee4}" => "\u{9b3c}",
        "\u{2ee5}" => "\u{9c7c}",
        "\u{2ee6}" => "\u{9e1f}",
        "\u{2ee7}" => "\u{5364}",
        "\u{2ee8}" => "\u{9ea6}",
        "\u{2ee9}" => "\u{9ec4}",
        "\u{2eea}" => "\u{9efe}",
        "\u{2eeb}" => "\u{6589}",
        "\u{2eec}" => "\u{9f50}",
        "\u{2eed}" => "\u{6b6f}",
        "\u{2eee}" => "\u{9f7f}",
        "\u{2eef}" => "\u{7adc}",
        "\u{2ef0}" => "\u{9f99}",
        "\u{2ef1}" => "\u{9f9c}",
        "\u{2ef2}" => "\u{4e80}",
        "\u{2ef3}" => "\u{9f9f}"
      }.freeze

      # Transliterator for radicals
      class Transliterator < Yosina::BaseTransliterator
        # Initialize the transliterator with options
        #
        # @param _options [Hash] Configuration options (currently unused)
        def initialize(_options = {})
          # Options currently unused for radicals transliterator
          super()
        end

        # Replace Kangxi radicals with equivalent CJK ideographs
        #
        # @param input_chars [Enumerable<Char>] The characters to transliterate
        # @return [Enumerable<Char>] The transliterated characters
        def call(input_chars)
          offset = 0

          result = input_chars.filter_map do |char|
            replacement = RADICALS_MAPPINGS[char.c]
            c = if replacement
                  # Skip empty replacements (character removal)
                  next if replacement.empty?

                  Char.new(c: replacement, offset: offset, source: char)
                else
                  char.with_offset(offset)
                end
            offset += c.c.length
            c
          end

          class << result
            include Yosina::Chars
          end

          result
        end
      end

      # Factory method to create a radicals transliterator
      #
      # @param options [Hash] Configuration options
      # @return [Transliterator] A new radicals transliterator instance
      def self.call(options = {})
        Transliterator.new(options)
      end
    end
  end
end
